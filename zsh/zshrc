# -----------------------------------------------------------------------------
# Pre Zim framework
# -----------------------------------------------------------------------------

# Editor
export EDITOR='vim'
export VISUAL='vim'

# -----------------------------------------------------------------------------
# Zim framework
# -----------------------------------------------------------------------------

ZIM_HOME=${ZDOTDIR:-${HOME}}/.zim
[[ -s ${ZIM_HOME}/zimfw.zsh ]] && source ${ZIM_HOME}/zimfw.zsh

# -----------------------------------------------------------------------------
# Post Zim framework
# -----------------------------------------------------------------------------

# Shell parameters
KEYTIMEOUT=1

# GPG
GPG_TTY="$(tty)"
export GPG_TTY

# Go
export GOPATH="$HOME/go"
path=('/usr/local/go/bin' "$GOPATH/bin" $path)

# Google Cloud SDK
[[ -d '/usr/lib/google-cloud-sdk/bin/' ]] && path=('/usr/lib/google-cloud-sdk/bin/' $path)
[[ -f '/usr/share/google-cloud-sdk/completion.zsh.inc' ]] && . '/usr/share/google-cloud-sdk/completion.zsh.inc'

# Prompt
_kube_ps1_to_rprompt() {
	RPROMPT=$(kube_ps1)
}
add-zsh-hook precmd _kube_ps1_to_rprompt

# Source local environment
[[ -s ${ZDOTDIR:-${HOME}}/.zlocal ]] && source ${ZDOTDIR:-${HOME}}/.zlocal


typeset -aU path # ensure PATH entries remain unique after rc file reload
export PATH
